<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
	
	const request = require('request');

	// Promise 封装接口
	function request1() {
		return new Promise((resolve, reject) => {
			request('https://www.baidu.com', function (response) {
				if (response.retCode == 200) {
					// 这里的 response 是接口1的返回结果
					resolve('request1 success' + response);
				} else {
					reject('接口请求失败');
				}
			});
		});
	}

	request1().then((res1) => {
		// 接口1请求成功后，打印接口1的返回结果
		console.log(res1);
		return request2();
	});
	
	
	/*
      // 第一步：model层的接口封装
      const promise = new Promise((resolve, reject) => {
        // 这里做异步任务（比如ajax 请求接口。这里暂时用定时器代替）
        setTimeout(function () {
          var data = { retCode: 0, msg: 'qianguyihao' }; // 接口返回的数据
          if (data.retCode == 0) {
            // 接口请求成功时调用
            resolve(data);
          } else {
            // 接口请求失败时调用
            reject({ retCode: -1, msg: 'network error' });
          }
        }, 100);
      });

      // 第二步：业务层的接口调用。这里的 data 就是 从 resolve 和 reject 传过来的，也就是从接口拿到的数据
      promise
        .then((data) => {
          // 从 resolve 获取正常结果
          console.log(data);
        })
        .catch((data) => {
          // 从 reject 获取异常结果
          console.log(data);
        });
		*/
    </script>
  </body>
</html>